(function(d){var j=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},k=1,l,m,n,r;l=d.View=function(a,c,b,e){var f=a.match(/\.[\w\d]+$/),g,h,i=a;if(typeof b==="function"){e=b;b=undefined}if(!f){f=d.View.ext;i+=d.View.ext}h=j(i);if(i.match(/^\/\//))i=steal.root.join(i.substr(2));f=d.View.types[f];return(a=d.View.cached[h]?d.View.cached[h]:(g=document.getElementById(a))?f.renderer(h,g.innerHTML):r(f,h,i,c,b,e))&&m(a,f,h,c,b,e)};m=function(a,c,b,e,f,g){if(d.View.cache)d.View.cached[b]=
a;a=a.call(c,e,f);g&&g(a);return a};n=function(a,c){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+c;};r=function(a,c,b,e,f,g){if(g)d.ajax({url:b,dataType:"text",error:function(){n("",b)},success:function(i){n(i,b);m(a.renderer(c,i),a,c,e,f,g)}});else{var h=d.ajax({async:false,url:b,dataType:"text",error:function(){n("",b)}}).responseText;n(h,b);return a.renderer(c,h)}};d.extend(d.View,{hookups:{},hookup:function(a){var c=++k;l.hookups[c]=a;return c},cached:{},
cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(a,c,b){return"$.View.preload('"+c+"',"+d.View.types["."+a].script(c,b)+");"},preload:function(a,c){d.View.cached[a]=function(b,e){return c.call(b,b,e)}}});var s,o,t,u,v,p;s=function(a){var c=d.fn[a];d.fn[a]=function(){var b=d.makeArray(arguments),e,f,g=this;if(t(b)){if(e=u(b)){f=b[e];b[e]=function(h){o.call(g,[h],c);f.call(g,h)};d.View.apply(d.View,b);return this}b=[d.View.apply(d.View,b)]}return o.call(this,
b,c)}};o=function(a,c){var b;for(var e in jQuery.View.hookups)break;if(e){b=d.View.hookups;d.View.hookups={};a[0]=d(a[0])}c=c.apply(this,a);e&&v(a[0],b);return c};t=function(a){var c=typeof a[1];return typeof a[0]=="string"&&(c=="object"||c=="function")&&!a[1].nodeType&&!a[1].jquery};u=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};v=function(a,c){var b,e=0,f,g;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(b=a.length;e<b;e++)if(a[e].getAttribute&&
(f=a[e].getAttribute("data-view-id"))&&(g=c[f])){g(a[e],f);delete c[f];a[e].removeAttribute("data-view-id")}d.extend(d.View.hookups,c)};p=["prepend","append","after","before","replace","text","html","replaceWith"];for(var q=0;q<p.length;q++)s(p[q])})(jQuery);
(function(){function d(j,k){j="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%})/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/{%=(.+?)%}/g,"',$1,'").split("{%").join("');").split("%}").join("p.push('")+"');}return p.join('');";var l=new Function("obj",j);l.body=j;return k?l(k):l}$.View.register({suffix:"micro",renderer:function(j,k){var l=d(k);return function(m){return l(m)}},script:function(j,k){return"function(obj){"+
d(k).body+"}"}});jQuery.View.ext=".micro"})(jQuery);
