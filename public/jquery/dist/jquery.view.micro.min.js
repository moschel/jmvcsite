(function(d){var n=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},l=1,i,j,m,r;i=d.View=function(a,c,b,e){var f=a.match(/\.[\w\d]+$/),g,h,k=a;if(typeof b==="function"){e=b;b=undefined}if(!f){f=d.View.ext;k+=d.View.ext}h=n(k);if(k.match(/^\/\//))k=steal.root.join(k.substr(2));f=d.View.types[f];return(a=d.View.cached[h]?d.View.cached[h]:(g=document.getElementById(a))?f.renderer(h,g.innerHTML):r(f,h,k,c,b,e))&&j(a,f,h,c,b,e)};j=function(a,c,b,e,f,g){if(d.View.cache)d.View.cached[b]=
a;a=a.call(c,e,f);g&&g(a);return a};m=function(a,c){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+c;};r=function(a,c,b,e,f,g){if(g)d.ajax({url:b,dataType:"text",error:function(){m("",b)},success:function(k){m(k,b);j(a.renderer(c,k),a,c,e,f,g)}});else{var h=d.ajax({async:false,url:b,dataType:"text",error:function(){m("",b)}}).responseText;m(h,b);return a.renderer(c,h)}};d.extend(d.View,{hookups:{},hookup:function(a){var c=++l;i.hookups[c]=a;return c},cached:{},
cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(a,c,b){return"$.View.preload('"+c+"',"+d.View.types["."+a].script(c,b)+");"},preload:function(a,c){d.View.cached[a]=function(b,e){return c.call(b,b,e)}}});var s,o,t,u,v,p;s=function(a){var c=jQuery.fn[a];jQuery.fn[a]=function(){var b=d.makeArray(arguments),e,f,g=this;if(t(b)){if(e=u(b)){f=b[e];b[e]=function(h){o.call(g,[h],c);f.call(g,h)};d.View.apply(d.View,b);return this}b=[d.View.apply(d.View,
b)]}return o.call(this,b,c)}};o=function(a,c){for(var b in jQuery.View.hookups);if(b)a[0]=d(a[0]);c=c.apply(this,a);b&&v(a[0]);return c};t=function(a){var c=typeof a[1];return typeof a[0]=="string"&&(c=="object"||c=="function")&&!a[1].nodeType&&!a[1].jquery};u=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};v=function(a){var c=jQuery.View.hookups,b,e=0,f,g;jQuery.View.hookups={};a=a.add("[data-view-id]",a);for(b=a.length;e<b;e++)if(a[e].getAttribute&&(f=a[e].getAttribute("data-view-id"))&&
(g=c[f])){g(a[e],f);delete c[f];a[e].removeAttribute("data-view-id")}d.extend(jQuery.View.hookups,c)};p=["prepend","append","after","before","replace","text","html","replaceWith"];for(var q=0;q<p.length;q++)s(p[q])})(true);
(function(d){function n(l,i){l="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+l.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%})/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/{%=(.+?)%}/g,"',$1,'").split("{%").join("');").split("%}").join("p.push('")+"');}return p.join('');";var j=new Function("obj",l);j.body=l;return i?j(i):j}d.View.register({suffix:"micro",renderer:function(l,i){var j=n(i);return function(m){return j(m)}},script:function(l,i){return"function(obj){"+
n(i).body+"}"}});jQuery.View.ext=".micro"})(true);
