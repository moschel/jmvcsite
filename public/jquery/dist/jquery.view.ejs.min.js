(function(g){var o=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},v=1,h,s,t;isDeferred=function(a){return a&&g.isFunction(a.always)};getDeferreds=function(a){var d=[];if(isDeferred(a))return[a];else for(var c in a)isDeferred(a[c])&&d.push(a[c]);return d};usefulPart=function(a){return g.isArray(a)&&a.length===3&&a[1]==="success"?a[0]:a};h=g.View=function(a,d,c,j){if(typeof c==="function"){j=c;c=undefined}var l=getDeferreds(d);if(l.length){var n=g.Deferred();l.push(t(a,true));g.when.apply(g,
l).then(function(m){var w=g.makeArray(arguments),x=w.pop()[0];if(isDeferred(d))d=usefulPart(m);else for(var y in d)if(isDeferred(d[y]))d[y]=usefulPart(w.shift());w=x(d,c);n.resolve(w);j&&j(w)});return n.promise()}else{var k;l=typeof j==="function";n=t(a,l);if(l){k=n;n.done(function(m){j(m(d,c))})}else n.done(function(m){k=m(d,c)});return k}};s=function(a,d){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+d;};t=function(a,d){return g.ajax({url:a,dataType:"view",
async:d})};g.ajaxTransport("view",function(a,d){a=d.url;var c=a.match(/\.[\w\d]+$/),j,l,n,k=a,m,w=function(x){x=j.renderer(n,x);if(h.cache)h.cached[n]=x;return{view:x}};if(l=document.getElementById(a))c=l.type.match(/\/[\d\w]+$/)[0].replace(/^\//,".");if(!c){c=h.ext;k+=h.ext}n=o(k);if(k.match(/^\/\//))k=typeof steal==="undefined"?"/"+k.substr(2):steal.root.join(k.substr(2));j=h.types[c];return{send:function(x,y){if(h.cached[n])return y(200,"success",{view:h.cached[n]});else if(l)y(200,"success",w(l.innerHTML));
else m=g.ajax({async:d.async,url:k,dataType:"text",error:function(){s("",k);y(404)},success:function(z){s(z,k);y(200,"success",w(z))}})},abort:function(){m&&m.abort()}}});g.extend(h,{hookups:{},hookup:function(a){var d=++v;h.hookups[d]=a;return d},cached:{},cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(a,d,c){return"$.View.preload('"+d+"',"+h.types["."+a].script(d,c)+");"},preload:function(a,d){h.cached[a]=function(c,j){return d.call(c,c,j)}}});
var f,p,q,u,r,b;f=function(a){var d=g.fn[a];g.fn[a]=function(){var c=g.makeArray(arguments),j,l,n=this;if(q(c)){if(j=u(c)){l=c[j];c[j]=function(k){p.call(n,[k],d);l.call(n,k)};h.apply(h,c);return this}c=h.apply(h,c);if(isDeferred(c)){c.done(function(k){p.call(n,[k],d)});return this}else c=[c]}return p.call(this,c,d)}};p=function(a,d){var c;for(var j in h.hookups)break;if(j){c=h.hookups;h.hookups={};a[0]=g(a[0])}d=d.apply(this,a);j&&r(a[0],c);return d};q=function(a){var d=typeof a[1];return typeof a[0]==
"string"&&(d=="object"||d=="function")&&!a[1].nodeType&&!a[1].jquery};u=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};r=function(a,d){var c,j=0,l,n;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(c=a.length;j<c;j++)if(a[j].getAttribute&&(l=a[j].getAttribute("data-view-id"))&&(n=d[l])){n(a[j],l);delete d[l];a[j].removeAttribute("data-view-id")}g.extend(h.hookups,d)};b=["prepend","append","after","before","text","html","replaceWith","val"];
for(var e=0;e<b.length;e++)f(b[e])})(jQuery);
(function(g){var o={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},v=function(f,p,q){return f[p]||q&&(f[p]={})},h=function(f){return(f=typeof f)&&(f=="function"||f=="object")},s=function(f,p,q){f=f?f.split(o.dot):[];var u=f.length;p=g.isArray(p)?p:[p||window];var r,b,e,a=0;if(u==0)return p[0];for(;r=p[a++];){for(e=0;e<u-1&&h(r);e++)r=v(r,f[e],q);if(h(r)){b=v(r,f[e],q);if(b!==undefined){q===false&&delete r[f[e]];
return b}}}},t=g.String=g.extend(g.String||{},{getObject:s,capitalize:function(f){return f.charAt(0).toUpperCase()+f.substr(1)},camelize:function(f){f=t.classize(f);return f.charAt(0).toLowerCase()+f.substr(1)},classize:function(f,p){f=f.split(o.undHash);for(var q=0;q<f.length;q++)f[q]=t.capitalize(f[q]);return f.join(p||"")},niceName:function(){t.classize(parts[i]," ")},underscore:function(f){return f.replace(o.colons,"/").replace(o.words,"$1_$2").replace(o.lowUp,"$1_$2").replace(o.dash,"_").toLowerCase()},
sub:function(f,p,q){var u=[];u.push(f.replace(o.replacer,function(r,b){r=s(b,p,typeof q=="boolean"?!q:q);b=typeof r;if((b==="object"||b==="function")&&b!==null){u.push(r);return""}else return""+r}));return u.length<=1?u[0]:u}})})(jQuery);(function(g){g.String.rsplit=function(o,v){for(var h=v.exec(o),s=[],t;h!==null;){t=h.index;if(t!==0){s.push(o.substring(0,t));o=o.slice(t)}s.push(h[0]);o=o.slice(h[0].length);h=v.exec(o)}o!==""&&s.push(o);return s}})(jQuery);
(function(g){var o=function(b){eval(b)},v=function(b){return b.substr(0,b.length-1)},h=g.String.rsplit,s=g.extend,t=g.isArray,f=function(b){return b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')};escapeHTML=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")};EJS=function(b){if(this.constructor!=EJS){var e=new EJS(b);return function(a,d){return e.render(a,d)}}if(typeof b=="function"){this.template={};this.template.process=
b}else{s(this,EJS.options,b);this.template=r(this.text,this.type,this.name)}};g.EJS=EJS;EJS.prototype={constructor:EJS,render:function(b,e){b=b||{};this._extra_helpers=e;e=new EJS.Helpers(b,e||{});return this.template.process.call(b,b,e)}};EJS.text=function(b){if(typeof b=="string")return b;if(b===null||b===undefined)return"";var e=b.hookup&&function(a,d){b.hookup.call(b,a,d)}||typeof b=="function"&&b||t(b)&&function(a,d){for(var c=0;c<b.length;c++)b[c].hookup?b[c].hookup(a,d):b[c](a,d)};if(e)return"data-view-id='"+
g.View.hookup(e)+"'";return b.toString?b.toString():""};EJS.clean=function(b){return typeof b=="string"?escapeHTML(b):""};var p=function(b,e,a){e=h(e,/\n/);for(var d=0;d<e.length;d++)q(b,e[d],a)},q=function(b,e,a){b.lines++;e=h(e,b.splitter);for(var d,c=0;c<e.length;c++){d=e[c];d!==null&&a(d,b)}},u=function(b,e){var a={};s(a,{left:b+"%",right:"%"+e,dLeft:b+"%%",dRight:"%%"+e,eeLeft:b+"%==",eLeft:b+"%=",cmnt:b+"%#",cleanLeft:b+"%~",scan:p,lines:0});a.splitter=new RegExp("("+[a.dLeft,a.dRight,a.eeLeft,
a.eLeft,a.cleanLeft,a.cmnt,a.left,a.right+"\n",a.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return a},r=function(b,e,a){b=b.replace(/\r\n/g,"\n").replace(/\r/g,"\n");e=e||"<";var d=new EJS.Buffer(["var ___v1ew = [];"],[]),c="",j=function(k){d.push("___v1ew.push(",'"',f(k),'");')},l=null,n=function(){c=""};p(u(e,e==="["?"]":">"),b||"",function(k,m){if(l===null)switch(k){case "\n":c+="\n";j(c);d.cr();n();break;case m.left:case m.eLeft:case m.eeLeft:case m.cleanLeft:case m.cmnt:l=
k;c.length>0&&j(c);n();break;case m.dLeft:c+=m.left;break;default:c+=k;break}else switch(k){case m.right:switch(l){case m.left:if(c[c.length-1]=="\n"){c=v(c);d.push(c,";");d.cr()}else d.push(c,";");break;case m.cleanLeft:d.push("___v1ew.push(","(jQuery.EJS.clean(",c,")));");break;case m.eLeft:d.push("___v1ew.push(","(jQuery.EJS.text(",c,")));");break;case m.eeLeft:d.push("___v1ew.push(","(jQuery.EJS.text(",c,")));");break}l=null;n();break;case m.dRight:c+=m.right;break;default:c+=k;break}});c.length>
0&&d.push("___v1ew.push(",'"',f(c)+'");');b={out:"try { with(_VIEW) { with (_CONTEXT) {"+d.close()+" return ___v1ew.join('');}}}catch(e){e.lineNumber=null;throw e;}"};o.call(b,"this.process = (function(_CONTEXT,_VIEW){"+b.out+"});\r\n//@ sourceURL="+a+".js");return b};EJS.Buffer=function(b,e){this.line=[];this.script=[];this.post=e;this.push.apply(this,b)};EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=
[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};EJS.options={type:"<",ext:".ejs"};EJS.Helpers=function(b,e){this._data=b;this._extras=e;s(this,e)};EJS.Helpers.prototype={plugin:function(){var b=g.makeArray(arguments),e=b.shift();return function(a){a=g(a);a[e].apply(a,b)}},view:function(b,e,a){a=a||this._extras;e=e||this._data;return g.View(b,e,a)}};g.View.register({suffix:"ejs",
script:function(b,e){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new EJS({text:e})).template.out+" })"},renderer:function(b,e){var a=new EJS({text:e,name:b});return function(d,c){return a.render.call(a,d,c)}}})})(jQuery);
