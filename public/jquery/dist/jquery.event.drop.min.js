(function(d){var k=function(g,a,b,c,e,h){return a>=c&&a<c+h&&g>=b&&g<b+e};d.fn.within=function(g,a,b){var c=[];this.each(function(){var e=jQuery(this);if(this==document.documentElement)return c.push(this);e=b?jQuery.data(this,"offset",e.offset()):e.offset();k(g,a,e.left,e.top,this.offsetWidth,this.offsetHeight)&&c.push(this)});return this.pushStack(jQuery.unique(c),"within",g+","+a)};d.fn.withinBox=function(g,a,b,c,e){var h=[];this.each(function(){var f=jQuery(this);if(this==document.documentElement)return this.ret.push(this);
var i=e?jQuery.data(this,"offset",f.offset()):f.offset(),j=f.width();f=f.height();(res=!(i.top>a+c||i.top+f<a||i.left>g+b||i.left+j<g))&&h.push(this)});return this.pushStack(jQuery.unique(h),"withinBox",jQuery.makeArray(arguments).join(","))}})(jQuery);
(function(){jQuery.fn.compare=function(d){try{d=d.jquery?d[0]:d}catch(k){return null}if(window.HTMLElement){var g=HTMLElement.prototype.toString.call(d);if(g=="[xpconnect wrapped native prototype]"||g=="[object XULElement]")return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(d);if(this[0]==document&&d!=document)return 8;g=(this[0]!==d&&this[0].contains(d)&&16)+(this[0]!=d&&d.contains(this[0])&&8);var a=document.documentElement;if(this[0].sourceIndex){g+=this[0].sourceIndex<
d.sourceIndex&&4;g+=this[0].sourceIndex>d.sourceIndex&&2;g+=(this[0].ownerDocument!==d.ownerDocument||this[0]!=a&&this[0].sourceIndex<=0||d!=a&&d.sourceIndex<=0)&&1}else{a=document.createRange();var b=document.createRange();a.selectNode(this[0]);b.selectNode(d);a.compareBoundaryPoints(Range.START_TO_START,b)}return g}})(jQuery);
(function(d){var k=d.event,g=["dropover","dropon","dropout","dropinit","dropmove","dropend"];d.Drop=function(a,b){jQuery.extend(this,a);this.element=b};d.each(g,function(){k.special[this]={add:function(){var a=d(this),b=a.data("dropEventCount")||0;a.data("dropEventCount",b+1);b==0&&d.Drop.addElement(this)},remove:function(){var a=d(this),b=a.data("dropEventCount")||0;a.data("dropEventCount",b-1);b<=1&&d.Drop.removeElement(this)}}});d.extend(d.Drop,{lowerName:"drop",_elements:[],_responders:[],last_active:[],
endName:"dropon",addElement:function(a){for(var b=0;b<this._elements.length;b++)if(a==this._elements[b])return;this._elements.push(a)},removeElement:function(a){for(var b=0;b<this._elements.length;b++)if(a==this._elements[b]){this._elements.splice(b,1);return}},sortByDeepestChild:function(a,b){a=a.element.compare(b.element);if(a&16||a&4)return 1;if(a&8||a&2)return-1;return 0},isAffected:function(a,b,c){return c.element!=b.element&&c.element.within(a[0],a[1],c).length==1},deactivate:function(a,b,c){b.out(c,
a);a.callHandlers(this.lowerName+"out",a.element[0],c,b)},activate:function(a,b,c){b.over(c,a);a.callHandlers(this.lowerName+"over",a.element[0],c,b)},move:function(a,b,c){a.callHandlers(this.lowerName+"move",a.element[0],c,b)},compile:function(a,b){var c,e,h,f;this.last_active=[];for(var i=0;i<this._elements.length;i++){c=this._elements[i];e=d.event.findBySelector(c,g);for(h in e){f=h?jQuery(h,c):[c];for(var j=0;j<f.length;j++){jQuery.removeData(f[j],"offset");this.add(f[j],new this(e[h]),a,b)}}}},
add:function(a,b,c,e){a=jQuery(a);b=new d.Drop(b,a);b.callHandlers(this.lowerName+"init",a[0],c,e);b._canceled||this._responders.push(b)},show:function(a,b,c){if(this._responders.length){var e=[],h=true,f,i,j,l,m=this.last_active;for(f=0;f<this._responders.length;f++)this.isAffected(a,b,this._responders[f])&&e.push(this._responders[f]);e.sort(this.sortByDeepestChild);c.stopRespondPropagate=function(){h=false};j=e.slice();this.last_active=e;for(f=0;f<m.length;f++){i=m[f];for(a=0;l=j[a];)if(i==l){j.splice(a,
1);break}else a++;l||this.deactivate(i,b,c);if(!h)return}for(a=0;a<j.length;a++){this.activate(j[a],b,c);if(!h)return}for(a=0;a<e.length;a++){this.move(e[a],b,c);if(!h)return}}},end:function(a,b){var c;for(c=0;c<this._responders.length;c++)this._responders[c].callHandlers(this.lowerName+"end",null,a,b);for(var e=0;e<this.last_active.length;e++){c=this.last_active[e];this.isAffected(a.vector(),b,c)&&c[this.endName]&&c.callHandlers(this.endName,null,a,b)}this.clear()},clear:function(){this._responders=
[]}});d.Drag.responder=d.Drop;d.extend(d.Drop.prototype,{callHandlers:function(a,b,c,e){for(var h=this[a]?this[a].length:0,f=0;f<h;f++)this[a][f].call(b||this.element[0],c,this,e)},cache:function(a){this._cache=a!=null?a:true},cancel:function(){this._canceled=true}})})(jQuery);
