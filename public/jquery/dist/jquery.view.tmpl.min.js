(function(i){var w=function(d){return d.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},A=1,B,x,u,G;B=i.View=function(d,g,f,k){var l=d.match(/\.[\w\d]+$/),p,q,o=d;if(typeof f==="function"){k=f;f=undefined}if(!l){l=i.View.ext;o+=i.View.ext}q=w(o);if(o.match(/^\/\//))o=steal.root.join(o.substr(2));l=i.View.types[l];return(d=i.View.cached[q]?i.View.cached[q]:(p=document.getElementById(d))?l.renderer(q,p.innerHTML):G(l,q,o,g,f,k))&&x(d,l,q,g,f,k)};x=function(d,g,f,k,l,p){if(i.View.cache)i.View.cached[f]=
d;d=d.call(g,k,l);p&&p(d);return d};u=function(d,g){if(!d.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+g;};G=function(d,g,f,k,l,p){if(p)i.ajax({url:f,dataType:"text",error:function(){u("",f)},success:function(o){u(o,f);x(d.renderer(g,o),d,g,k,l,p)}});else{var q=i.ajax({async:false,url:f,dataType:"text",error:function(){u("",f)}}).responseText;u(q,f);return d.renderer(g,q)}};i.extend(i.View,{hookups:{},hookup:function(d){var g=++A;B.hookups[g]=d;return g},cached:{},
cache:true,register:function(d){this.types["."+d.suffix]=d},types:{},ext:".ejs",registerScript:function(d,g,f){return"$.View.preload('"+g+"',"+i.View.types["."+d].script(g,f)+");"},preload:function(d,g){i.View.cached[d]=function(f,k){return g.call(f,f,k)}}});var C,D,H,I,J,E;C=function(d){var g=i.fn[d];i.fn[d]=function(){var f=i.makeArray(arguments),k,l,p=this;if(H(f)){if(k=I(f)){l=f[k];f[k]=function(q){D.call(p,[q],g);l.call(p,q)};i.View.apply(i.View,f);return this}f=[i.View.apply(i.View,f)]}return D.call(this,
f,g)}};D=function(d,g){var f;for(var k in jQuery.View.hookups)break;if(k){f=i.View.hookups;i.View.hookups={};d[0]=i(d[0])}g=g.apply(this,d);k&&J(d[0],f);return g};H=function(d){var g=typeof d[1];return typeof d[0]=="string"&&(g=="object"||g=="function")&&!d[1].nodeType&&!d[1].jquery};I=function(d){return typeof d[3]==="function"?3:typeof d[2]==="function"&&2};J=function(d,g){var f,k=0,l,p;d=d.filter(function(){return this.nodeType!=3});d=d.add("[data-view-id]",d);for(f=d.length;k<f;k++)if(d[k].getAttribute&&
(l=d[k].getAttribute("data-view-id"))&&(p=g[l])){p(d[k],l);delete g[l];d[k].removeAttribute("data-view-id")}i.extend(i.View.hookups,g)};E=["prepend","append","after","before","replace","text","html","replaceWith"];for(var y=0;y<E.length;y++)C(E[y])})(jQuery);
(function(){function i(a,b,e,c){c={data:c||(b?b.data:{}),_wrap:b?b._wrap:null,tmpl:null,parent:b||null,nodes:[],calls:D,nest:H,wrap:I,html:J,update:E};a&&jQuery.extend(c,a,{nodes:[],parent:b});if(e){c.tmpl=e;c._ctnt=c._ctnt||c.tmpl(jQuery,c);c.key=++q;(L.length?k:f)[q]=c}return c}function w(a,b,e){var c;e=e?jQuery.map(e,function(j){return typeof j==="string"?a.key?j.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+a.key+'" $2'):j:w(j,a,j._ctnt)}):a;if(b)return e;e=e.join("");e.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(j,h,m,r){c=jQuery(m).get();C(c);if(h)c=A(h).concat(c);if(r)c=c.concat(A(r))});return c?c:A(e)}function A(a){var b=document.createElement("div");b.innerHTML=a;return jQuery.makeArray(b.childNodes)}function B(a){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+jQuery.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(b,e,c,j,h,m,r){b=jQuery.tmpl.tag[c];if(!b)throw"Template command not found: "+c;c=b._default||[];if(m&&!/\w$/.test(h)){h+=m;m=""}if(h){h=u(h);r=r?","+u(r)+")":m?")":"";r=m?h.indexOf(".")>-1?h+m:"("+h+").call($item"+r:h;m=m?r:"(typeof("+h+")==='function'?("+h+").call($item):("+h+"))"}else m=r=c.$1||"null";j=u(j);return"');"+b[e?"close":"open"].split("$notnull_1").join(h?"typeof("+h+")!=='undefined' && ("+h+")!=null":"true").split("$1a").join(m).split("$1").join(r).split("$2").join(j?j.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,
function(z,v,K,t){return(t=t?","+t+")":K?")":"")?"("+v+").call($item"+t:z}):c.$2||"")+"_.push('"})+"');}return _;")}function x(a,b){a._wrap=w(a,true,jQuery.isArray(b)?b:[g.test(b)?b:jQuery(b).html()]).join("")}function u(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function G(a){var b=document.createElement("div");b.appendChild(a.cloneNode(true));return b.innerHTML}function C(a){function b(v){function K(M){M+=e;n=h[M]=h[M]||i(n,f[n.parent.key+e]||n.parent,null,true)}var t,s=v,n,F;
if(F=v.getAttribute(d)){for(;s.parentNode&&(s=s.parentNode).nodeType===1&&!(t=s.getAttribute(d)););if(t!==F){s=s.parentNode?s.nodeType===11?0:s.getAttribute(d)||0:0;if(!(n=f[F])){n=k[F];n=i(n,f[s]||k[s],null,true);n.key=++q;f[q]=n}o&&K(F)}v.removeAttribute(d)}else if(o&&(n=jQuery.data(v,"tmplItem"))){K(n.key);f[n.key]=n;s=(s=jQuery.data(v.parentNode,"tmplItem"))?s.key:0}if(n){for(t=n;t&&t.key!=s;){t.nodes.push(v);t=t.parent}delete n._ctnt;delete n._wrap;jQuery.data(v,"tmplItem",n)}}var e="_"+o,c,
j,h={},m,r,z;m=0;for(r=a.length;m<r;m++)if((c=a[m]).nodeType===1){j=c.getElementsByTagName("*");for(z=j.length-1;z>=0;z--)b(j[z]);b(c)}}function D(a,b,e,c){if(!a)return L.pop();L.push({_:a,tmpl:b,item:this,data:e,options:c})}function H(a,b,e){return jQuery.tmpl(jQuery.template(a),b,e,this)}function I(a,b){var e=a.options||{};e.wrapped=b;return jQuery.tmpl(jQuery.template(a.tmpl),a.data,e,a.item)}function J(a,b){var e=this._wrap;return jQuery.map(jQuery(jQuery.isArray(e)?e.join(""):e).filter(a||"*"),
function(c){return b?c.innerText||c.textContent:c.outerHTML||G(c)})}function E(){var a=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(a[0]);jQuery(a).remove()}var y=jQuery.fn.domManip,d="_tmplitem",g=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,f={},k={},l,p={key:0,data:{}},q=0,o=0,L=[];jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(e){var c=[];e=jQuery(e);var j,h,m;j=this.length===1&&this[0].parentNode;
l=f||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&e.length===1){e[b](this[0]);c=this}else{h=0;for(m=e.length;h<m;h++){o=h;j=(h>0?this.clone(true):this).get();jQuery.fn[b].apply(jQuery(e[h]),j);c=c.concat(j)}o=0;c=this.pushStack(c,a,e.selector)}e=l;l=null;jQuery.tmpl.complete(e);return c}});jQuery.fn.extend({tmpl:function(a,b,e){return jQuery.tmpl(this[0],a,b,e)},tmplItem:function(){return jQuery.tmplItem(this[0])},template:function(a){return jQuery.template(a,this[0])},domManip:function(a,b,
e){if(a[0]&&a[0].nodeType){for(var c=jQuery.makeArray(arguments),j=a.length,h=0,m;h<j&&!(m=jQuery.data(a[h++],"tmplItem")););if(j>1)c[0]=[jQuery.makeArray(a)];if(m&&o)c[2]=function(r){jQuery.tmpl.afterManip(this,r,e)};y.apply(this,c)}else y.apply(this,arguments);o=0;l||jQuery.tmpl.complete(f);return this}});jQuery.extend({tmpl:function(a,b,e,c){var j=!c;if(j){c=p;a=jQuery.template[a]||jQuery.template(null,a);k={}}else if(!a){a=c.tmpl;f[c.key]=c;c.nodes=[];c.wrapped&&x(c,c.wrapped);return jQuery(w(c,
null,c.tmpl(jQuery,c)))}if(!a)return[];if(typeof b==="function")b=b.call(c||{});e&&e.wrapped&&x(e,e.wrapped);b=jQuery.isArray(b)?jQuery.map(b,function(h){return h?i(e,c,a,h):null}):[i(e,c,a,b)];return j?jQuery(w(c,null,b)):b},tmplItem:function(a){var b;if(a instanceof jQuery)a=a[0];for(;a&&a.nodeType===1&&!(b=jQuery.data(a,"tmplItem"))&&(a=a.parentNode););return b||p},template:function(a,b){if(b){if(typeof b==="string")b=B(b);else if(b instanceof jQuery)b=b[0]||{};if(b.nodeType)b=jQuery.data(b,"tmpl")||
jQuery.data(b,"tmpl",B(b.innerHTML));return typeof a==="string"?(jQuery.template[a]=b):b}return a?typeof a!=="string"?jQuery.template(null,a):jQuery.template[a]||jQuery.template(null,g.test(a)?a:jQuery(a)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});jQuery.extend(jQuery.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",
close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){f={}},afterManip:function(a,b,e){var c=b.nodeType===11?jQuery.makeArray(b.childNodes):
b.nodeType===1?[b]:[];e.call(a,b);C(c);o++}});$.View.register({suffix:"tmpl",renderer:function(a,b){return function(e){return $.tmpl(b,e)}},script:function(a,b){return"function(data){return ("+$.tmpl(b).toString()+").call(jQuery, jQuery, data); }"}});jQuery.View.ext=".tmpl"})(jQuery);
