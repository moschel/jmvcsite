(function(e){var r=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},d=1,i,h,k,o;i=e.View=function(a,c,b,f){var g=a.match(/\.[\w\d]+$/),j,l,m=a;if(typeof b==="function"){f=b;b=undefined}if(!g){g=e.View.ext;m+=e.View.ext}l=r(m);if(m.match(/^\/\//))m=steal.root.join(m.substr(2));g=e.View.types[g];return(a=e.View.cached[l]?e.View.cached[l]:(j=document.getElementById(a))?g.renderer(l,j.innerHTML):o(g,l,m,c,b,f))&&h(a,g,l,c,b,f)};h=function(a,c,b,f,g,j){if(e.View.cache)e.View.cached[b]=
a;a=a.call(c,f,g);j&&j(a);return a};k=function(a,c){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+c;};o=function(a,c,b,f,g,j){if(j)e.ajax({url:b,dataType:"text",error:function(){k("",b)},success:function(m){k(m,b);h(a.renderer(c,m),a,c,f,g,j)}});else{var l=e.ajax({async:false,url:b,dataType:"text",error:function(){k("",b)}}).responseText;k(l,b);return a.renderer(c,l)}};e.extend(e.View,{hookups:{},hookup:function(a){var c=++d;i.hookups[c]=a;return c},cached:{},
cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(a,c,b){return"$.View.preload('"+c+"',"+e.View.types["."+a].script(c,b)+");"},preload:function(a,c){e.View.cached[a]=function(b,f){return c.call(b,b,f)}}});var n,p,q,u,v,s;n=function(a){var c=jQuery.fn[a];jQuery.fn[a]=function(){var b=e.makeArray(arguments),f,g,j=this;if(q(b)){if(f=u(b)){g=b[f];b[f]=function(l){p.call(j,[l],c);g.call(j,l)};e.View.apply(e.View,b);return this}b=[e.View.apply(e.View,
b)]}return p.call(this,b,c)}};p=function(a,c){for(var b in jQuery.View.hookups);if(b)a[0]=e(a[0]);c=c.apply(this,a);b&&v(a[0]);return c};q=function(a){var c=typeof a[1];return typeof a[0]=="string"&&(c=="object"||c=="function")&&!a[1].nodeType&&!a[1].jquery};u=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};v=function(a){var c=jQuery.View.hookups,b,f=0,g,j;jQuery.View.hookups={};a=a.add("[data-view-id]",a);for(b=a.length;f<b;f++)if(a[f].getAttribute&&(g=a[f].getAttribute("data-view-id"))&&
(j=c[g])){j(a[f],g);delete c[g];a[f].removeAttribute("data-view-id")}e.extend(jQuery.View.hookups,c)};s=["prepend","append","after","before","replace","text","html","replaceWith"];for(var t=0;t<s.length;t++)n(s[t])})(true);
(function(e){var r=jQuery.fn.domManip;jQuery.fn.extend({render:function(d){return this.map(function(i,h){return jQuery.render(h,d)})},domManip:function(d){if(d.length>1&&d[0].nodeType)arguments[0]=[jQuery.makeArray(d)];if(d.length===2&&typeof d[0]==="string"&&typeof d[1]!=="string")arguments[0]=[jQuery.render(d[0],d[1])];return r.apply(this,arguments)}});jQuery.extend({render:function(d,i){var h;if(jQuery.templates[d])h=jQuery.templates[d];else if(d.nodeType)h=jQuery.data(d).tmpl||jQuery.tmpl(d.innerHTML);
h=h||jQuery.tmpl(d);return jQuery.isArray(i)?jQuery.map(i,function(k,o){return h.call(k,jQuery,k,o)}):h.call(i,jQuery,i,0)},templates:{},tmplcmd:{each:{_default:[null,"$i"],prefix:"jQuery.each($1,function($2){with(this){",suffix:"}});"},"if":{prefix:"if($1){",suffix:"}"},"else":{prefix:"}else{"},html:{prefix:"_.push(typeof $1==='function'?$1.call(this):$1);"},"=":{_default:["this"],prefix:"_.push($.encode(typeof $1==='function'?$1.call(this):$1));"}},encode:function(d){return d!=null?document.createTextNode(d.toString()).nodeValue:
""},tmpl:function(d,i,h){d=new Function("jQuery","$data","$i","var $=jQuery,_=[];_.data=$data;_.index=$i;with($data){_.push('"+d.replace(/[\r\t\n]/g," ").replace(/\${([^}]*)}/g,"{{= $1}}").replace(/{{(\/?)(\w+|.)(?:\((.*?)\))?(?: (.*?))?}}/g,function(k,o,n,p,q){k=jQuery.tmplcmd[n];if(!k)throw"Template not found: "+n;n=k._default;return"');"+k[o?"suffix":"prefix"].split("$1").join(q||n[0]).split("$2").join(p||n[1])+"_.push('"})+"');}return $(_.join('')).get();");return i?d.call(this,jQuery,i,h):d}});
e.View.register({suffix:"tmpl",renderer:function(d,i){return function(h){return jQuery.render(i,h)}},script:function(d,i){return"function(data){return ("+e.tmpl(i).toString()+").call(jQuery, jQuery, data); }"}});jQuery.View.ext=".tmpl"})(true);
