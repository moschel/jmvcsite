(function(o){var A=function(d){return d.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},D=1,m,B,y;isDeferred=function(d){return d&&o.isFunction(d.always)};getDeferreds=function(d){var f=[];if(isDeferred(d))return[d];else for(var g in d)isDeferred(d[g])&&f.push(d[g]);return f};usefulPart=function(d){return o.isArray(d)&&d.length===3&&d[1]==="success"?d[0]:d};m=o.View=function(d,f,g,h){if(typeof g==="function"){h=g;g=undefined}var k=getDeferreds(f);if(k.length){var l=o.Deferred();k.push(y(d,true));o.when.apply(o,
k).then(function(t){var r=o.makeArray(arguments),w=r.pop()[0];if(isDeferred(f))f=usefulPart(t);else for(var a in f)if(isDeferred(f[a]))f[a]=usefulPart(r.shift());r=w(f,g);l.resolve(r);h&&h(r)});return l.promise()}else{var p;k=typeof h==="function";l=y(d,k);if(k){p=l;l.done(function(t){h(t(f,g))})}else l.done(function(t){p=t(f,g)});return p}};B=function(d,f){if(!d.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+f;};y=function(d,f){return o.ajax({url:d,dataType:"view",
async:f})};o.ajaxTransport("view",function(d,f){d=f.url;var g=d.match(/\.[\w\d]+$/),h,k,l,p=d,t,r=function(w){w=h.renderer(l,w);if(m.cache)m.cached[l]=w;return{view:w}};if(k=document.getElementById(d))g=k.type.match(/\/[\d\w]+$/)[0].replace(/^\//,".");if(!g){g=m.ext;p+=m.ext}l=A(p);if(p.match(/^\/\//))p=typeof steal==="undefined"?"/"+p.substr(2):steal.root.join(p.substr(2));h=m.types[g];return{send:function(w,a){if(m.cached[l])return a(200,"success",{view:m.cached[l]});else if(k)a(200,"success",r(k.innerHTML));
else t=o.ajax({async:f.async,url:p,dataType:"text",error:function(){B("",p);a(404)},success:function(b){B(b,p);a(200,"success",r(b))}})},abort:function(){t&&t.abort()}}});o.extend(m,{hookups:{},hookup:function(d){var f=++D;m.hookups[f]=d;return f},cached:{},cache:true,register:function(d){this.types["."+d.suffix]=d},types:{},ext:".ejs",registerScript:function(d,f,g){return"$.View.preload('"+f+"',"+m.types["."+d].script(f,g)+");"},preload:function(d,f){m.cached[d]=function(g,h){return f.call(g,g,h)}}});
var H,z,I,J,K,E;H=function(d){var f=o.fn[d];o.fn[d]=function(){var g=o.makeArray(arguments),h,k,l=this;if(I(g)){if(h=J(g)){k=g[h];g[h]=function(p){z.call(l,[p],f);k.call(l,p)};m.apply(m,g);return this}g=m.apply(m,g);if(isDeferred(g)){g.done(function(p){z.call(l,[p],f)});return this}else g=[g]}return z.call(this,g,f)}};z=function(d,f){var g;for(var h in m.hookups)break;if(h){g=m.hookups;m.hookups={};d[0]=o(d[0])}f=f.apply(this,d);h&&K(d[0],g);return f};I=function(d){var f=typeof d[1];return typeof d[0]==
"string"&&(f=="object"||f=="function")&&!d[1].nodeType&&!d[1].jquery};J=function(d){return typeof d[3]==="function"?3:typeof d[2]==="function"&&2};K=function(d,f){var g,h=0,k,l;d=d.filter(function(){return this.nodeType!=3});d=d.add("[data-view-id]",d);for(g=d.length;h<g;h++)if(d[h].getAttribute&&(k=d[h].getAttribute("data-view-id"))&&(l=f[k])){l(d[h],k);delete f[k];d[h].removeAttribute("data-view-id")}o.extend(m.hookups,f)};E=["prepend","append","after","before","text","html","replaceWith","val"];
for(var F=0;F<E.length;F++)H(E[F])})(jQuery);
(function(){function o(a,b,e,c){c={data:c||(b?b.data:{}),_wrap:b?b._wrap:null,tmpl:null,parent:b||null,nodes:[],calls:I,nest:J,wrap:K,html:E,update:F};a&&jQuery.extend(c,a,{nodes:[],parent:b});if(e){c.tmpl=e;c._ctnt=c._ctnt||c.tmpl(jQuery,c);c.key=++t;(w.length?k:h)[t]=c}return c}function A(a,b,e){var c;e=e?jQuery.map(e,function(j){return typeof j==="string"?a.key?j.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+f+'="'+a.key+'" $2'):j:A(j,a,j._ctnt)}):a;if(b)return e;e=e.join("");e.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(j,i,n,s){c=jQuery(n).get();z(c);if(i)c=D(i).concat(c);if(s)c=c.concat(D(s))});return c?c:D(e)}function D(a){var b=document.createElement("div");b.innerHTML=a;return jQuery.makeArray(b.childNodes)}function m(a){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+jQuery.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(b,e,c,j,i,n,s){b=jQuery.tmpl.tag[c];if(!b)throw"Template command not found: "+c;c=b._default||[];if(n&&!/\w$/.test(i)){i+=n;n=""}if(i){i=y(i);s=s?","+y(s)+")":n?")":"";s=n?i.indexOf(".")>-1?i+n:"("+i+").call($item"+s:i;n=n?s:"(typeof("+i+")==='function'?("+i+").call($item):("+i+"))"}else n=s=c.$1||"null";j=y(j);return"');"+b[e?"close":"open"].split("$notnull_1").join(i?"typeof("+i+")!=='undefined' && ("+i+")!=null":"true").split("$1a").join(n).split("$1").join(s).split("$2").join(j?j.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,
function(C,x,L,v){return(v=v?","+v+")":L?")":"")?"("+x+").call($item"+v:C}):c.$2||"")+"_.push('"})+"');}return _;")}function B(a,b){a._wrap=A(a,true,jQuery.isArray(b)?b:[g.test(b)?b:jQuery(b).html()]).join("")}function y(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function H(a){var b=document.createElement("div");b.appendChild(a.cloneNode(true));return b.innerHTML}function z(a){function b(x){function L(M){M+=e;q=i[M]=i[M]||o(q,h[q.parent.key+e]||q.parent,null,true)}var v,u=x,q,G;
if(G=x.getAttribute(f)){for(;u.parentNode&&(u=u.parentNode).nodeType===1&&!(v=u.getAttribute(f)););if(v!==G){u=u.parentNode?u.nodeType===11?0:u.getAttribute(f)||0:0;if(!(q=h[G])){q=k[G];q=o(q,h[u]||k[u],null,true);q.key=++t;h[t]=q}r&&L(G)}x.removeAttribute(f)}else if(r&&(q=jQuery.data(x,"tmplItem"))){L(q.key);h[q.key]=q;u=(u=jQuery.data(x.parentNode,"tmplItem"))?u.key:0}if(q){for(v=q;v&&v.key!=u;){v.nodes.push(x);v=v.parent}delete q._ctnt;delete q._wrap;jQuery.data(x,"tmplItem",q)}}var e="_"+r,c,
j,i={},n,s,C;n=0;for(s=a.length;n<s;n++)if((c=a[n]).nodeType===1){j=c.getElementsByTagName("*");for(C=j.length-1;C>=0;C--)b(j[C]);b(c)}}function I(a,b,e,c){if(!a)return w.pop();w.push({_:a,tmpl:b,item:this,data:e,options:c})}function J(a,b,e){return jQuery.tmpl(jQuery.template(a),b,e,this)}function K(a,b){var e=a.options||{};e.wrapped=b;return jQuery.tmpl(jQuery.template(a.tmpl),a.data,e,a.item)}function E(a,b){var e=this._wrap;return jQuery.map(jQuery(jQuery.isArray(e)?e.join(""):e).filter(a||"*"),
function(c){return b?c.innerText||c.textContent:c.outerHTML||H(c)})}function F(){var a=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(a[0]);jQuery(a).remove()}var d=jQuery.fn.domManip,f="_tmplitem",g=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,h={},k={},l,p={key:0,data:{}},t=0,r=0,w=[];jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(e){var c=[];e=jQuery(e);var j,i,n;j=this.length===1&&this[0].parentNode;
l=h||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&e.length===1){e[b](this[0]);c=this}else{i=0;for(n=e.length;i<n;i++){r=i;j=(i>0?this.clone(true):this).get();jQuery.fn[b].apply(jQuery(e[i]),j);c=c.concat(j)}r=0;c=this.pushStack(c,a,e.selector)}e=l;l=null;jQuery.tmpl.complete(e);return c}});jQuery.fn.extend({tmpl:function(a,b,e){return jQuery.tmpl(this[0],a,b,e)},tmplItem:function(){return jQuery.tmplItem(this[0])},template:function(a){return jQuery.template(a,this[0])},domManip:function(a,b,
e){if(a[0]&&a[0].nodeType){for(var c=jQuery.makeArray(arguments),j=a.length,i=0,n;i<j&&!(n=jQuery.data(a[i++],"tmplItem")););if(j>1)c[0]=[jQuery.makeArray(a)];if(n&&r)c[2]=function(s){jQuery.tmpl.afterManip(this,s,e)};d.apply(this,c)}else d.apply(this,arguments);r=0;l||jQuery.tmpl.complete(h);return this}});jQuery.extend({tmpl:function(a,b,e,c){var j=!c;if(j){c=p;a=jQuery.template[a]||jQuery.template(null,a);k={}}else if(!a){a=c.tmpl;h[c.key]=c;c.nodes=[];c.wrapped&&B(c,c.wrapped);return jQuery(A(c,
null,c.tmpl(jQuery,c)))}if(!a)return[];if(typeof b==="function")b=b.call(c||{});e&&e.wrapped&&B(e,e.wrapped);b=jQuery.isArray(b)?jQuery.map(b,function(i){return i?o(e,c,a,i):null}):[o(e,c,a,b)];return j?jQuery(A(c,null,b)):b},tmplItem:function(a){var b;if(a instanceof jQuery)a=a[0];for(;a&&a.nodeType===1&&!(b=jQuery.data(a,"tmplItem"))&&(a=a.parentNode););return b||p},template:function(a,b){if(b){if(typeof b==="string")b=m(b);else if(b instanceof jQuery)b=b[0]||{};if(b.nodeType)b=jQuery.data(b,"tmpl")||
jQuery.data(b,"tmpl",m(b.innerHTML));return typeof a==="string"?(jQuery.template[a]=b):b}return a?typeof a!=="string"?jQuery.template(null,a):jQuery.template[a]||jQuery.template(null,g.test(a)?a:jQuery(a)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});jQuery.extend(jQuery.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",
close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){h={}},afterManip:function(a,b,e){var c=b.nodeType===11?jQuery.makeArray(b.childNodes):
b.nodeType===1?[b]:[];e.call(a,b);z(c);r++}});$.View.register({suffix:"tmpl",renderer:function(a,b){var e=$.template(null,b);return function(c){return e.call($,$,{data:c}).join("")}},script:function(a,b){return"function(data){return ("+$.template(null,b)+").call(jQuery, jQuery, {data: data}).join(''); }"}});jQuery.View.ext=".tmpl"})(jQuery);
