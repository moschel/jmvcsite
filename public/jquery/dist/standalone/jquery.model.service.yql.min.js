(function(){$.Model.service.yql=$.Model.service({select:"*",from:"flickr.photos.search",convert:function(a,c){$.each(c,function(b){b=new RegExp("#{"+b+"}","g");var d=$.trim(this);a=a.replace(b,d)});return a},findAll:function(a,c,b){a=$.extend({},this._service,a);var d=["SELECT",a.select,"FROM",a.from];if(a.where)d.push("WHERE",typeof a.where=="string"||this._service.convert(a.where[0],a.where[1]));var g=this;a={url:"http://query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:d.join(" "),format:"json",
env:"store://datatables.org/alltableswithkeys",callback:"?"}};if(b)a.error=b;a.success=this.wrapMany?function(e){var f=e.query.results;if(f)for(var h in f){c(g.wrapMany(e.query.results[h]));break}else c([])}:c;$.ajax(a)}})})(jQuery);
