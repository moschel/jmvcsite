(function(f){f.Controller.extend("Tie",{nameOk:true},{init:function(b,c,a,d){if(!d){b=this.element.data("controllers")||{};for(var e in b)if(typeof b[e].val=="function"){d=e;break}}this.type=d;this.attr=a;this.inst=c;this.bind(c,a,"attrChanged");this.lastValue=c=c.attr(a);if(d){this.bind(this.element.data("controllers")[d],"destroyed","destroy");this.element[d]("val",c)}else this.element.val(c)},attrChanged:function(b,c,a){if(a!==this.lastValue){this.setVal(a);this.lastValue=a}},setVal:function(b){this.type?
this.element[this.type]("val",b):this.element.val(b)},change:function(b,c,a){this.type||(a=this.element.val());this.inst.attr(this.attr,a,null,this.callback("setBack"))},setBack:function(){this.setVal(this.lastValue)},destroy:function(){this.inst=null;this._super()}})})(jQuery);
