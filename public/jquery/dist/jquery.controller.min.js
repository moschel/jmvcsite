(function(f){var n={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},t=function(e,o,l){return e[o]||l&&(e[o]={})},w=function(e){return(e=typeof e)&&(e=="function"||e=="object")},s=function(e,o,l){e=e?e.split(n.dot):[];var m=e.length;o=f.isArray(o)?o:[o||window];var d,j,k,g=0;if(m==0)return o[0];for(;d=o[g++];){for(k=0;k<m-1&&w(d);k++)d=t(d,e[k],l);if(w(d)){j=t(d,e[k],l);if(j!==undefined){l===false&&delete d[e[k]];
return j}}}},u=f.String=f.extend(f.String||{},{getObject:s,capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=u.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(e,o){e=e.split(n.undHash);for(var l=0;l<e.length;l++)e[l]=u.capitalize(e[l]);return e.join(o||"")},niceName:function(){u.classize(parts[i]," ")},underscore:function(e){return e.replace(n.colons,"/").replace(n.words,"$1_$2").replace(n.lowUp,"$1_$2").replace(n.dash,"_").toLowerCase()},
sub:function(e,o,l){var m=[];m.push(e.replace(n.replacer,function(d,j){d=s(j,o,typeof l=="boolean"?!l:l);j=typeof d;if((j==="object"||j==="function")&&j!==null){m.push(d);return""}else return""+d}));return m.length<=1?m[0]:m}})})(jQuery);
(function(f){var n=false,t=f.makeArray,w=f.isFunction,s=f.isArray,u=f.extend,e=function(d,j){return d.concat(t(j))},o=/xyz/.test(function(){})?/\b_super\b/:/.*/,l=function(d,j,k){k=k||d;for(var g in d)k[g]=w(d[g])&&w(j[g])&&o.test(d[g])?function(v,x){return function(){var r=this._super,q;this._super=j[v];q=x.apply(this,arguments);this._super=r;return q}}(g,d[g]):d[g]},m=f.Class=function(){arguments.length&&m.extend.apply(m,arguments)};u(m,{callback:function(d){var j=t(arguments),k;d=j.shift();s(d)||
(d=[d]);k=this;return function(){for(var g=e(j,arguments),v,x=d.length,r=0,q;r<x;r++)if(q=d[r]){if((v=typeof q=="string")&&k._set_called)k.called=q;g=(v?k[q]:q).apply(k,g||[]);if(r<x-1)g=!s(g)||g._use_call?[g]:g}return g}},getObject:f.String.getObject,newInstance:function(){var d=this.rawInstance(),j;if(d.setup)j=d.setup.apply(d,arguments);if(d.init)d.init.apply(d,s(j)?j:arguments);return d},setup:function(d){this.defaults=u(true,{},d.defaults,this.defaults);return arguments},rawInstance:function(){n=
true;var d=new this;n=false;return d},extend:function(d,j,k){function g(){if(!n)return this.constructor!==g&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}if(typeof d!="string"){k=j;j=d;d=null}if(!k){k=j;j=null}k=k||{};var v=this,x=this.prototype,r,q,z,y;n=true;y=new this;n=false;l(k,x,y);for(r in this)if(this.hasOwnProperty(r))g[r]=this[r];l(j,this,g);if(d){z=d.split(/\./);q=z.pop();z=x=m.getObject(z.join("."),window,
true);x[q]=g}u(g,{prototype:y,namespace:z,shortName:q,constructor:g,fullName:d});g.prototype.Class=g.prototype.constructor=g;v=g.setup.apply(g,e([v],arguments));if(g.init)g.init.apply(g,v||[]);return g}});m.prototype.callback=m.callback})(jQuery);(function(f){var n=jQuery.cleanData;f.cleanData=function(t){for(var w=0,s;(s=t[w])!==undefined;w++)f(s).triggerHandler("destroyed");n(t)}})(jQuery);
(function(f){var n=function(a,b,c){var h,p=a.bind&&a.unbind?a:f(s(a)?[a]:a);if(b.indexOf(">")===0){b=b.substr(1);h=function(A){A.target===a&&c.apply(this,arguments)}}p.bind(b,h||c);return function(){p.unbind(b,h||c);a=b=c=h=null}},t=f.makeArray,w=f.isArray,s=f.isFunction,u=f.extend,e=f.String,o=function(a,b,c,h){f(a).delegate(b,c,h);return function(){f(a).undelegate(b,c,h);a=c=h=b=null}},l=function(a,b,c,h){return h?o(a,h,b,c):n(a,b,c)},m=function(a){return function(){return a.apply(null,[this.nodeName?
f(this):this].concat(Array.prototype.slice.call(arguments,0)))}},d=/\./g,j=/_?controllers?/ig,k=function(a){return e.underscore(a.replace("jQuery.","").replace(d,"_").replace(j,""))},g=/[^\w]/,v=/\{([^\}]+)\}/g,x=/^(?:(.*?)\s)?([\w\.\:>]+)$/,r,q=function(a,b){return f.data(a,"controllers",b)};f.Class("jQuery.Controller",{init:function(){if(!(!this.shortName||this.fullName=="jQuery.Controller")){this._fullName=k(this.fullName);this._shortName=k(this.shortName);var a=this,b=this.pluginName||this._fullName,
c;f.fn[b]||(f.fn[b]=function(h){var p=t(arguments),A=typeof h=="string"&&s(a.prototype[h]),C=p[0];return this.each(function(){var B=q(this);if(B=B&&B[b])A?B[C].apply(B,p.slice(1)):B.update.apply(B,p);else a.newInstance.apply(a,[this].concat(p))})});this.actions={};for(c in this.prototype)if(!(c=="constructor"||!s(this.prototype[c])))if(this._isAction(c))this.actions[c]=this._action(c);this.onDocument&&new a(document.documentElement)}},hookup:function(a){return new this(a)},_isAction:function(a){return g.test(a)?
true:f.inArray(a,this.listensTo)>-1||f.event.special[a]||z[a]},_action:function(a,b){v.lastIndex=0;if(!b&&v.test(a))return null;a=b?e.sub(a,[b,window]):a;b=w(a);var c=(b?a[1]:a).match(x);return{processor:z[c[2]]||r,parts:c,delegate:b?a[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(a,b){var c,h=this.Class;a=a.jquery?a[0]:a;this.element=f(a).addClass(h._fullName);(q(a)||q(a,{}))[h._fullName]=this;this._bindings=[];this.options=u(u(true,{},h.defaults),b);for(c in h.actions)if(h.actions.hasOwnProperty(c)){b=
h.actions[c]||h._action(c,this.options);this._bindings.push(b.processor(b.delegate||a,b.parts[2],b.parts[1],this.callback(c),this))}this.called="init";var p=m(this.callback("destroy"));this.element.bind("destroyed",p);this._bindings.push(function(){f(a).unbind("destroyed",p)});return this.element},bind:function(a,b,c){if(typeof a=="string"){c=b;b=a;a=this.element}return this._binder(a,b,c)},_binder:function(a,b,c,h){if(typeof c=="string")c=m(this.callback(c));this._bindings.push(l(a,b,c,h));return this._bindings.length},
delegate:function(a,b,c,h){if(typeof a=="string"){h=c;c=b;b=a;a=this.element}return this._binder(a,c,h,b)},update:function(a){u(this.options,a)},destroy:function(){if(this._destroyed)throw this.Class.shortName+" controller instance has been deleted";var a=this,b=this.Class._fullName;this._destroyed=true;this.element.removeClass(b);f.each(this._bindings,function(c,h){h(a.element[0])});delete this._actions;delete this.element.data("controllers")[b];f(this).triggerHandler("destroyed");this.element=null},
find:function(a){return this.element.find(a)},_set_called:true});var z=f.Controller.processors;r=function(a,b,c,h,p){var A=p.Class;if(A.onDocument&&!/^Main(Controller)?$/.test(A.shortName)&&a===p.element[0])c=c?"#"+A._shortName+" "+c:"#"+A._shortName;return l(a,b,m(h),c)};f.each("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){z[b]=r});var y,D=
function(a,b){for(y=0;y<b.length;y++)if(typeof b[y]=="string"?a.Class._shortName==b[y]:a instanceof b[y])return true;return false};f.fn.controllers=function(){var a=t(arguments),b=[],c,h,p;this.each(function(){c=f.data(this,"controllers");for(p in c)if(c.hasOwnProperty(p)){h=c[p];if(!a.length||D(h,a))b.push(h)}});return b};f.fn.controller=function(){return this.controllers.apply(this,arguments)[0]}})(jQuery);
