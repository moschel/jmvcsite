(function(d){var u=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},v=1,o,k,j,p;o=d.View=function(a,c,b,e){var f=a.match(/\.[\w\d]+$/),g,h,i=a;if(typeof b==="function"){e=b;b=undefined}if(!f){f=d.View.ext;i+=d.View.ext}h=u(i);if(i.match(/^\/\//))i=steal.root.join(i.substr(2));f=d.View.types[f];return(a=d.View.cached[h]?d.View.cached[h]:(g=document.getElementById(a))?f.renderer(h,g.innerHTML):p(f,h,i,c,b,e))&&k(a,f,h,c,b,e)};k=function(a,c,b,e,f,g){if(d.View.cache)d.View.cached[b]=
a;a=a.call(c,e,f);g&&g(a);return a};j=function(a,c){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+c;};p=function(a,c,b,e,f,g){if(g)d.ajax({url:b,dataType:"text",error:function(){j("",b)},success:function(i){j(i,b);k(a.renderer(c,i),a,c,e,f,g)}});else{var h=d.ajax({async:false,url:b,dataType:"text",error:function(){j("",b)}}).responseText;j(h,b);return a.renderer(c,h)}};d.extend(d.View,{hookups:{},hookup:function(a){var c=++v;o.hookups[c]=a;return c},cached:{},
cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(a,c,b){return"$.View.preload('"+c+"',"+d.View.types["."+a].script(c,b)+");"},preload:function(a,c){d.View.cached[a]=function(b,e){return c.call(b,b,e)}}});var q,l,r,s,t,m;q=function(a){var c=d.fn[a];d.fn[a]=function(){var b=d.makeArray(arguments),e,f,g=this;if(r(b)){if(e=s(b)){f=b[e];b[e]=function(h){l.call(g,[h],c);f.call(g,h)};d.View.apply(d.View,b);return this}b=[d.View.apply(d.View,b)]}return l.call(this,
b,c)}};l=function(a,c){var b;for(var e in jQuery.View.hookups)break;if(e){b=d.View.hookups;d.View.hookups={};a[0]=d(a[0])}c=c.apply(this,a);e&&t(a[0],b);return c};r=function(a){var c=typeof a[1];return typeof a[0]=="string"&&(c=="object"||c=="function")&&!a[1].nodeType&&!a[1].jquery};s=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};t=function(a,c){var b,e=0,f,g;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(b=a.length;e<b;e++)if(a[e].getAttribute&&
(f=a[e].getAttribute("data-view-id"))&&(g=c[f])){g(a[e],f);delete c[f];a[e].removeAttribute("data-view-id")}d.extend(d.View.hookups,c)};m=["prepend","append","after","before","replace","text","html","replaceWith"];for(var n=0;n<m.length;n++)q(m[n])})(jQuery);
