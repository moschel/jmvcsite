(function(d){var i=function(c){return c!==undefined?(this.array[0]=c):this.array[0]},e=function(c){return c!==undefined?(this.array[1]=c):this.array[1]};d.Vector=function(){this.update(d.makeArray(arguments))};d.Vector.prototype={app:function(c){var a,b=[];for(a=0;a<this.array.length;a++)b.push(c(this.array[a]));return(new d.Vector).update(b)},plus:function(){var c,a=arguments[0]instanceof d.Vector?arguments[0].array:d.makeArray(arguments),b=this.array.slice(0),f=new d.Vector;for(c=0;c<a.length;c++)b[c]=
(b[c]?b[c]:0)+a[c];return f.update(b)},minus:function(){var c,a=arguments[0]instanceof d.Vector?arguments[0].array:d.makeArray(arguments),b=this.array.slice(0),f=new d.Vector;for(c=0;c<a.length;c++)b[c]=(b[c]?b[c]:0)-a[c];return f.update(b)},equals:function(){var c,a=arguments[0]instanceof d.Vector?arguments[0].array:d.makeArray(arguments),b=this.array.slice(0),f=new d.Vector;for(c=0;c<a.length;c++)if(b[c]!=a[c])return null;return f.update(b)},x:i,width:i,y:e,height:e,top:e,left:i,toString:function(){return"("+
this.array[0]+","+this.array[1]+")"},update:function(c){var a;if(this.array)for(a=0;a<this.array.length;a++)delete this.array[a];this.array=c;for(a=0;a<c.length;a++)this[a]=this.array[a];return this}};d.Event.prototype.vector=function(){if(this.originalEvent.synthetic){var c=document.documentElement,a=document.body;return new d.Vector(this.clientX+(c&&c.scrollLeft||a&&a.scrollLeft||0)-(c.clientLeft||0),this.clientY+(c&&c.scrollTop||a&&a.scrollTop||0)-(c.clientTop||0))}else return new d.Vector(this.pageX,
this.pageY)};d.fn.offsetv=function(){if(this[0]==window)return new d.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop);else{var c=this.offset();return new d.Vector(c.left,c.top)}};d.fn.dimensionsv=function(c){return this[0]==window||!c?new d.Vector(this.width(),this.height()):new d.Vector(this[c+"Width"](),this[c+"Height"]())}})(jQuery);
(function(){var d=jQuery.event,i=function(e,c,a){var b,f,g,h,j,k,l;for(b=0;b<c.length;b++){f=c[b];h=f.indexOf(".")<0;if(!h){g=f.split(".");f=g.shift();l=new RegExp("(^|\\.)"+g.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}g=(e[f]||[]).slice(0);for(j=0;j<g.length;j++){k=g[j];if(!k.selector&&(h||l.test(k.namespace)))a(f,k.origHandler||k.handler)}}};d.find=function(e,c,a){e=$.data(e,"events");var b=[],f,g;if(!e)return b;if(a){if(!e.live)return[];g=e.live;for(e=0;e<g.length;e++){f=g[e];if(f.selector===
a&&$.inArray(f.origType,c)!==-1)b.push(f.origHandler||f.handler)}}else i(e,c,function(h,j){b.push(j)});return b};d.findBySelector=function(e,c){e=$.data(e,"events");var a={},b=function(f,g,h){f=a[f]||(a[f]={});(f[g]||(f[g]=[])).push(h)};if(!e)return a;$.each(e.live||[],function(f,g){if($.inArray(g.origType,c)!==-1)b(g.selector,g.origType,g.origHandler||g.handler)});i(e,c,function(f,g){b("",f,g)});return a};d.supportTouch="ontouchend"in document;$.fn.respondsTo=function(e){return this.length?d.find(this[0],
$.isArray(e)?e:[e]).length>0:false};$.fn.triggerHandled=function(e,c){e=typeof e=="string"?$.Event(e):e;this.trigger(e,c);return e.handled};d.setupHelper=function(e,c,a){if(!a){a=c;c=null}var b=function(g){var h=g.selector||"";if(h){g=d.find(this,e,h);g.length||$(this).delegate(h,c,a)}else d.find(this,e,h).length||d.add(this,c,a,{selector:h,delegate:this})},f=function(g){var h=g.selector||"";if(h){g=d.find(this,e,h);g.length||$(this).undelegate(h,c,a)}else d.find(this,e,h).length||d.remove(this,c,
a,{selector:h,delegate:this})};$.each(e,function(){d.special[this]={add:b,remove:f,setup:function(){},teardown:function(){}}})}})(jQuery);
(function(d){var i=function(a,b){var f=Array.prototype.slice.call(arguments,2);return function(){var g=[this].concat(f,d.makeArray(arguments));return b.apply(a,g)}},e=d.event,c=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){};d.Drag=function(){};d.extend(d.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(a,b){if(!(!(a.button===0||a.button==1)||this.current)){var f=new d.Drag,g=a.liveFired||b,h=a.handleObj.selector,j=this;this.current=f;f.setup({element:b,
delegate:a.liveFired||b,selector:a.handleObj.selector,moved:false,distance:this.distance,callbacks:{dragdown:e.find(g,["dragdown"],h),draginit:e.find(g,["draginit"],h),dragover:e.find(g,["dragover"],h),dragmove:e.find(g,["dragmove"],h),dragout:e.find(g,["dragout"],h),dragend:e.find(g,["dragend"],h)},destroyed:function(){j.current=null}},a)}}});d.extend(d.Drag.prototype,{setup:function(a,b){d.extend(this,a);this.element=d(this.element);this.event=b;this.allowOtherDrags=this.moved=false;var f=i(this,
this.mousemove),g=i(this,this.mouseup);this._mousemove=f;this._mouseup=g;this._distance=a.distance?a.distance:0;d(document).bind("mousemove",f);d(document).bind("mouseup",g);if(!this.callEvents("down",this.element,b)){this.noSelection(this.delegate);c()}},destroy:function(){d(document).unbind("mousemove",this._mousemove);d(document).unbind("mouseup",this._mouseup);if(!this.moved)this.event=this.element=null;this.selection(this.delegate);this.destroyed()},mousemove:function(a,b){if(!this.moved){if(Math.pow(b.pageX-
this.event.pageX,2)+Math.pow(b.pageY-this.event.pageY,2)<this._distance)return false;this.init(this.element,b);this.moved=true}a=b.vector();this._start_position&&this._start_position.equals(a)||this.draw(a,b)},mouseup:function(a,b){this.moved&&this.end(b);this.destroy()},noSelection:function(a){a=a||this.delegate;document.documentElement.onselectstart=function(){return false};document.documentElement.unselectable="on";this.selectionDisabled=this.selectionDisabled?this.selectionDisabled.add(a):d(a);
this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){if(this.selectionDisabled){document.documentElement.onselectstart=function(){};document.documentElement.unselectable="off";this.selectionDisabled.css("-moz-user-select","")}},init:function(a,b){a=d(a);var f=this.movingElement=this.element=d(a);this._cancelled=false;this.event=b;this.mouseStartPosition=b.vector();this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",a,b);
if(this._cancelled!==true){this.startPosition=f!=this.movingElement?this.movingElement.offsetv():this.currentDelta();this.makePositioned(this.movingElement);this.oldZIndex=this.movingElement.css("zIndex");this.movingElement.css("zIndex",1E3);!this._only&&this.constructor.responder&&this.constructor.responder.compile(b,this)}},makePositioned:function(a){var b;b=a.css("position");if(!b||b=="static"){b={position:"relative"};if(window.opera){b.top="0px";b.left="0px"}a.css(b)}},callEvents:function(a,b,
f,g){var h=this.callbacks[this.constructor.lowerName+a];for(a=0;a<h.length;a++)h[a].call(b,f,this,g);return h.length},currentDelta:function(){return new d.Vector(parseInt(this.movingElement.css("left"),10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(a,b){if(!this._cancelled){c();this.location=a.minus(this.mouseElementPosition);this.move(b);if(!this._cancelled){b.isDefaultPrevented()||this.position(this.location);!this._only&&this.constructor.responder&&this.constructor.responder.show(a,
this,b)}}},position:function(a){var b=this.currentDelta();b=this.movingElement.offsetv().minus(b);this.required_css_position=a.minus(b);this.offsetv=a;a=this.movingElement[0].style;if(!this._cancelled&&!this._horizontal)a.top=this.required_css_position.top()+"px";if(!this._cancelled&&!this._vertical)a.left=this.required_css_position.left()+"px"},move:function(a){this.callEvents("move",this.element,a)},over:function(a,b){this.callEvents("over",this.element,a,b)},out:function(a,b){this.callEvents("out",
this.element,a,b)},end:function(a){if(!this._cancelled){!this._only&&this.constructor.responder&&this.constructor.responder.end(a,this);this.callEvents("end",this.element,a);if(this._revert){var b=this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){b.cleanup.apply(b,arguments)})}else this.cleanup();this.event=null}},cleanup:function(){this.movingElement.css({zIndex:this.oldZIndex});this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&
!this.element.has(this.movingElement[0]).length&&this.movingElement.css({display:"none"});this._removeMovingElement&&this.movingElement.remove();this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=true;!this._only&&this.constructor.responder&&this.constructor.responder.clear(this.event.vector(),this,this.event);this.destroy()},ghost:function(a){var b=this.movingElement.clone().css("position","absolute");(a?d(a):this.movingElement).after(b);b.width(this.movingElement.width()).height(this.movingElement.height());
this.movingElement=b;this.noSelection(b);this._removeMovingElement=true;return b},representative:function(a,b,f){this._offsetX=b||0;this._offsetY=f||0;b=this.mouseStartPosition;this.movingElement=d(a);this.movingElement.css({top:b.y()-this._offsetY+"px",left:b.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new d.Vector(this._offsetX,this._offsetY)},revert:function(a){this._revert=a===undefined?true:a},vertical:function(){this._vertical=
true},horizontal:function(){this._horizontal=true},only:function(a){return this._only=a===undefined?true:a},distance:function(a){if(a!==undefined){this._distance=a;return this}else return this._distance}});e.setupHelper(["dragdown","draginit","dragover","dragmove","dragout","dragend"],"mousedown",function(a){d.Drag.mousedown.call(d.Drag,a,this)})})(jQuery);
